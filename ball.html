<html>

<head>
	<title>
		Gravity
	</title>
	<style>
	.circle {
      width: 20px;
      height: 20px;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 10px;
      background: darkgreen;
      position: absolute;
      
    }
	</style>
</head>

<body>
<div id="ball" class="circle"></div>
</body>

<script>
	/*
	function Ball(x, y, hVel, vVel)
	{
		ball = document.createElement("div");
		ball.className = "circle";
		ball.id = "ball";
		ball.innerHTML = "";
		ball.style.left = x + 'px';
		ball.style.top = y + 'px';
		document.getElementsByTagName('body')[0].appendChild(ball);
	}
	*/
	//var ball = new Ball(100,100,10,10);

	var g = 1;
	var xdir=1, ydir=1;
	var vvel=0, hvel=10;
	setInterval(function()
	{
		ball = document.getElementById("ball");
		y = ball.offsetTop+10;
		x = ball.offsetLeft+10;
		
		vvel = vvel + g*ydir*1;
		y += vvel*ydir*1;
		x += hvel*xdir*1;

		if(y>window.innerHeight-20)
		{
			y=window.innerHeight-20;
			ydir=-1;
			vvel-=3;
			hvel-=1;
		}
		
		if(y<10)
		{
			y=10;
			ydir=1;
			vvel-=3;
			hvel-=1;
		}

		if(vvel<=0)
		{
			ydir=1;
			vvel=0;
		}

		if(x<10)
		{
			x=10;
			xdir=1;
			hvel-=1;
			vvel-=3;
		}

		if(x>window.innerWidth-20)
		{
			x = window.innerWidth-20;
			xdir=-1;
			hvel-=1;
			vvel-=3;
		}

		if(hvel<0)
		{
			hvel=0;
		}

		ball.style.left = (x-10)+'px';
		ball.style.top = (y-10)+'px';
	},20);


document.addEventListener("keydown", function(e)
		{
			if(e.keyCode==38)
			{
				vvel = 20;
				ydir = -1;
			}
			else if(e.keyCode==40)
			{
				vvel -= 5;
			}
			else if(e.keyCode==37)
			{
				hvel=20;
				xdir =-1;
			}
			else if(e.keyCode==39)
			{
				hvel=20;
				xdir=1;
			}
		}, false);


var oldX = window.screenX,
    oldY = window.screenY;

var interval = setInterval(function()
{
  if(oldX != window.screenX || oldY != window.screenY)
  {
  	xdiff = (window.screenX - oldX)/2;
  	ydiff = (window.screenY - oldY)/2;
  	hvel -= xdiff*xdir;
  	vvel -= ydiff*ydir;
  	oldX = window.screenX;
  	oldY = window.screenY;
  } 
}, 1);

</script>

</html>
